# 概念

## 控制器 controller

控制器负责处理传入的请求和向客户端返回响应。

控制器的目的是接收应用的特定请求。路由机制控制哪个控制器接收哪些请求。通常，每个控制器有多个路由，不同的路由可以执行不同的操作。

## 装饰器函数

```js
var horribleCode = function(){
  console.log(’我是一堆你看不懂的老逻辑')

}

var _horribleCode = horribleCode

horribleCode = function() {

    _horribleCode()
    console.log('我是新的逻辑')

}

horribleCode()
```

## ES6 语法

```js
class Math {
  @log
  add(a, b) {
    return a + b;
  }
}
 
function log(target, name, descriptor) {
  var oldValue = descriptor.value;
 
  descriptor.value = function() {
    console.log(`Calling ${name} with`, arguments);
    return oldValue.apply(this, arguments);
  };
 
  return descriptor;
}
 
const math = new Math();
// passed parameters should get logged now
math.add(2, 4);
class Math {
  @log
  add(a, b) {
    return a + b;
  }
}

function log(target, name, descriptor) {
  var oldValue = descriptor.value;

  descriptor.value = function() {
    console.log(`Calling ${name} with`, arguments);
    return oldValue.apply(this, arguments);
  };

  return descriptor;
}

const math = new Math();

// passed parameters should get logged now
math.add(2, 4);

```


## 和继承的对比

继承中父类和子类存在强耦合性。

继承这种功能复用的方式通常被成为『白箱复用』，即父类内部细节对子类是可见的，所以继承被认为是破坏了封装性。

通过继承在完成一些功能复用的同时，有可能创建出大量的子类， 使子类的数量呈爆炸性增长。